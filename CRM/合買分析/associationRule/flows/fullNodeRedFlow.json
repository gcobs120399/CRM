[{"id":"55e11f37.466c5","type":"function","z":"67f08a3e.14f9e4","name":"Get Association Rules","func":"var data = msg.payload;\n\nvar Apriori = context.global.apriori;\n\nvar Alg = new Apriori.Algorithm(0.15, 0.6, false);\nvar transactions = Apriori.ArrayUtils.readCSVToArray(data, ',');\nnode.warn(transactions);\nbinomialToNominal(transactions);\ntransactions.shift().shift();\nnode.warn(transactions);\nvar analysisResult = Alg.analyze(transactions);\n\n//var result = JSON.stringify(analysisResult.associationRules);\n\n\n//msg.payload = analysisResult.associationRules;\nmsg.payload = analysisResult;\nreturn msg;\n\nfunction binomialToNominal(trans) {\n    for (var i = 1; i < trans.length; i++) {\n        for (var j = 0; j < trans[i].length; j++) {\n            if (trans[i][j] === \"false\") {\n                trans[i][j] = \"Not_\" + trans[0][j];\n            } else if (trans[i][j] === \"true\") {\n                trans[i][j] = trans[0][j];\n            } else {\n                trans[i][j] = trans[0][j] + '_' + trans[i][j];\n            }\n        }\n    }\n    return trans;\n}","outputs":"1","noerr":0,"x":673.2828216552734,"y":412.1641025543213,"wires":[["606fa239.7d0a6c"]]}]
